bundle:
  name: migration-accelerator

sync:
  include:
    - "*.yaml"
    - "*.yml"
    - "*.py"
    - "*.txt"
    - "*.json"
    - "src/**"
    - "frontend/**"
  exclude:
    - "frontend/node_modules/**"
    - "**/__pycache__/**"
    - "**/*.pyc"
    - ".databricks/**"
    - "dist/**"
    - ".git/**"
    - ".venv/**"
    - "*.egg-info/**"

resources:
  apps:
    migration-accelerator:
      name: migration-accelerator-v2
      description: "Assess and visualize ETL migration complexity and data lineage"
      source_code_path: ${workspace.root_path}/files
      config:
        env:
          - name: PYTHONPATH
            value: src
          - name: STORAGE_BACKEND
            value: unity_catalog
          - name: UC_VOLUME_PATH
            value: ${var.uc_volume_path}
          - name: DEBUG
            value: false

variables:
  uc_volume_path:
    description: "Unity Catalog volume path (e.g., /Volumes/catalog/schema/volume)"
  
  debug:
    description: "Enable debug mode"

targets:
  dev:
    mode: development
    workspace:
      root_path: /Workspace/Users/${workspace.current_user.userName}/.bundle/${bundle.name}/${bundle.target}
    variables:
      uc_volume_path: /Volumes/users/eri_adepoju/migration_accelerator
      debug: false
        
  prod:
    mode: production
    workspace:
      root_path: /Workspace/Shared/.bundle/${bundle.name}/${bundle.target}
    variables:
      uc_volume_path: /Volumes/
      debug: false
